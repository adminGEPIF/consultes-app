<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>GEPIF - Consultes Bases</title>
    
    <!-- Calcite Components (UI) -->
    <script type="module" src="https://js.arcgis.com/calcite-components/1.9.2/calcite.esm.js"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/calcite-components/1.9.2/calcite.css" />
    
    <!-- ArcGIS Maps SDK for JS -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.28/"></script>
    
    <!-- CSS Personalitzat -->
    <link rel="stylesheet" href="src/style.css">
</head>
<body>

    <calcite-shell>
        <!-- CapÃ§alera -->
        <calcite-navigation slot="header">
            <calcite-navigation-logo slot="logo" heading="Consultes Bases" description="GEPIF"></calcite-navigation-logo>
            <calcite-action id="btn-logout" slot="content-end" icon="sign-out" text="Sortir"></calcite-action>
        </calcite-navigation>

        <main id="main-container">
            
            <!-- VISTA 1: CARREGANT -->
            <div id="view-loading" class="view">
                <div style="display:flex; justify-content:center; align-items:center; height:80vh;">
                    <calcite-loader label="Autenticant..." scale="l"></calcite-loader>
                </div>
            </div>

            <!-- VISTA 2: LANDING (MENÃš PRINCIPAL) -->
            <div id="view-landing" class="view hidden">
                <div class="welcome-section">
                    <h1>Hola! ðŸ‘‹</h1>
                    <p>Selecciona el mÃ²dul de consulta:</p>
                </div>
                
                <div class="grid-menu">
                    <!-- Seguiment de Treballs -->
                   <calcite-card id="btn-nav-treballs">
    <div class="card-icon" style="color: #2e7d32;">
        <calcite-icon icon="notebook" scale="l"></calcite-icon>
    </div>
    <h3 slot="title">Seguiment de Treballs</h3>
    <p slot="subtitle">Expedients, unitats i jornals</p>
</calcite-card>

                    <!-- Consulta Vehicles -->
                    <calcite-card id="btn-nav-vehicles">
                        <div class="card-icon" style="color: #005e95;">
                            <calcite-icon icon="car" scale="l"></calcite-icon>
                        </div>
                        <h3 slot="title">Consulta Vehicles</h3>
                        <p slot="subtitle">Kilometratge i estat de la flota</p>
                    </calcite-card>

                    <!-- Expedients de Treballs -->
                    <calcite-card id="btn-nav-expedients">
                        <div class="card-icon" style="color: #6a1b9a;">
                            <calcite-icon icon="folder-open" scale="l"></calcite-icon>
                        </div>
                        <h3 slot="title">Expedients de Treballs</h3>
                        <p slot="subtitle">GestiÃ³ d'estats, paratges i municipis</p>
                    </calcite-card>
                    <calcite-card id="btn-nav-robots">
    <div class="card-icon" style="color: #ff5722;">
        <calcite-icon icon="robot" scale="l"></calcite-icon>
    </div>
    <h3 slot="title">Estat Robots</h3>
    <p slot="subtitle">Ãšltimes hores i operativitat</p>
</calcite-card>
                </div>
            </div>

            <!-- VISTA 3: CONSULTA (RESULTATS) -->
            <div id="view-query" class="view hidden">
                <calcite-button id="btn-back" appearance="transparent" icon-start="chevron-left" width="full">
                    Tornar al menÃº principal
                </calcite-button>
                
                <h2 id="query-title" style="margin: 10px 0; font-weight: 800;">Consulta</h2>

                <div class="filter-panel">
                    <!-- Filtre Unitat (ComÃº) -->
                    <calcite-label id="label-filtre-text">Unitat GEPIF / Vehicle
                        <calcite-select id="select-filter" scale="l">
                            <calcite-option value="TOTS">Tots els registres</calcite-option>
                        </calcite-select>
                    </calcite-label>

                    <!-- Filtre Data (Per a Treballs i Vehicles) -->
                    <calcite-label id="label-data">Dades des de:
                        <calcite-input-date-picker id="filter-date" scale="l" layout="horizontal"></calcite-input-date-picker>
                    </calcite-label>

                    <!-- Filtre Any (NomÃ©s per a Expedients) -->
                    <calcite-label id="label-any" class="hidden">Any de l'Expedient:
                        <calcite-select id="select-any" scale="l">
                            <calcite-option value="TOTS">Tots els anys</calcite-option>
                        </calcite-select>
                    </calcite-label>

                    <calcite-button id="btn-refresh" width="full" variant="primary" scale="l" icon-start="search">
                        ACTUALITZAR LLISTA
                    </calcite-button>
                </div>

                <div id="results-count"></div>
                <div id="results-container"></div>
            </div>

        </main>

        <!-- MODAL DE DETALLS -->
        <calcite-modal id="modal-detalls" width="m" scrollable>
            <h3 slot="header" id="modal-titol">Detall del Registre</h3>
            <div slot="content" id="modal-contingut">
                <!-- Contingut generat per JS -->
            </div>
            <calcite-button id="btn-tanca-modal" slot="primary" width="full">TANCAR FITXA</calcite-button>
        </calcite-modal>

    </calcite-shell>

    <!-- Script de l'App -->
    <script src="src/app.js"></script>
</body>
</html>
